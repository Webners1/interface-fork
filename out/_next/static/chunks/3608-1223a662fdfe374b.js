"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3608],{49932:function(e,n,t){var r=t(59499),o=t(14744),a=t(31518),i=t(71862),s=t(27262),c=t(69137),u=t(44232),d=t(12614),l=t(90849),p=t(67294),f=t(85893);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const b=(0,p.memo)((e=>{var n;let{inputAmount:t,onStateChange:r,tokenApproveOn:a,id:c,onSLPPermit:d}=e;const{i18n:l}=(0,o.mV)(),[v,b]=(0,s.qL)(null===t||void 0===t?void 0:t.wrapped,a),{gatherPermitSignature:g,signatureData:h}=(0,u.j3)(["Uniswap V2","SteamX LP Token"].includes(null!==(n=null===t||void 0===t?void 0:t.currency.name)&&void 0!==n?n:"")?null===t||void 0===t?void 0:t.wrapped:void 0,a),y=(0,p.useCallback)((async()=>{if(g)try{await g()}catch(e){await b()}else await b()}),[b,g]);return(0,p.useEffect)((()=>{if(h&&t&&v===s.UK.NOT_APPROVED){if(!d)throw new Error("onSLPPermit callback not defined");d(h)}}),[v,t,d,r,h]),(0,p.useEffect)((()=>{if(null!==t&&void 0!==t&&t.currency.wrapped.address)return r((e=>m(m({},e),{},{[t.currency.wrapped.address]:h?s.UK.APPROVED:v}))),()=>r((e=>{const n=m({},e);return n[t.currency.wrapped.address]&&delete n[t.currency.wrapped.address],n}))}),[v,t,null===t||void 0===t?void 0:t.currency.wrapped.address,r,h]),!h&&[s.UK.NOT_APPROVED,s.UK.PENDING].includes(v)?(0,f.jsx)(i.ZP,{fullWidth:!0,id:c,loading:v===s.UK.PENDING,color:"blue",onClick:y,children:l._(l._("Approve {0}",{0:null===t||void 0===t?void 0:t.currency.symbol}))}):(0,f.jsx)(f.Fragment,{})}));n.Z=e=>{let{spendFromWallet:n=!0,inputAmounts:t,tokenApproveOn:r,children:u,withPermit:v=!1,masterContractAddress:m,permit:g,onPermit:h,onSLPPermit:y,onPermitError:O}=e;const{account:w}=(0,d.aQ)(),{i18n:A}=(0,o.mV)(),P=(0,l.mq)(),{0:D,1:S}=(0,p.useState)({}),{0:N,1:k}=(0,p.useState)(!1),{approve:E,approvalState:j,getPermit:x,permit:T}=(0,c.ZP)(v?m:void 0,{}),I=Object.values(D).some((e=>e===s.UK.UNKNOWN))||!!v&&j===c.kG.UNKNOWN,C=(Object.values(D).every((e=>e===s.UK.APPROVED))||!n)&&(!v||j===c.kG.APPROVED),L=(0,p.useCallback)((async()=>{if(v&&!N){const e=await x();null!==e&&void 0!==e&&e.signature&&h?h(e.signature):O&&(k(!0),O())}else await E()}),[E,x,h,O,N,v]);return(0,f.jsxs)("div",{className:"flex flex-col gap-3",children:[t.every((e=>null===e||void 0===e?void 0:e.greaterThan(a.xE)))&&[c.kG.NOT_APPROVED,c.kG.PENDING].includes(j)&&(0,f.jsx)(i.ZP,{id:"btn-approve",loading:j===c.kG.PENDING,onClick:L,children:A._(A._("Approve BentoBox"))}),r&&t.reduce(((e,n,t)=>(null!==n&&void 0!==n&&n.currency.isNative||null===n||void 0===n||!n.greaterThan(a.xE)||e.push((0,f.jsx)(b,{id:"btn-approve",inputAmount:n,onStateChange:S,tokenApproveOn:r,onSLPPermit:y},t)),e)),[]),w?u({approved:C||!!g,loading:I,permit:T}):(0,f.jsx)(i.ZP,{color:"gradient",onClick:P,children:A._(A._("Connect Wallet"))})]})}},53389:function(e,n,t){t.d(n,{UK:function(){return r.UK},qL:function(){return r.qL},x7:function(){return O},rO:function(){return w.rO},HW:function(){return w.HW},mX:function(){return w.mX},cq:function(){return w.cq},MQ:function(){return w.MQ},TK:function(){return A.Z},JY:function(){return w.JY},wq:function(){return w.wq},ou:function(){return w.ou},JE:function(){return w.JE},Fe:function(){return w.Fe},Ti:function(){return w.Ti},cX:function(){return P.Z},i7:function(){return w.i7},bL:function(){return w.bL},sL:function(){return w.sL},oF:function(){return D.ZP},lz:function(){return w.lz}});var r=t(27262),o=t(19485),a=t(9279),i=t(31518),s=t(2593);const c=e=>{let{bentobox:n,tokenAddress:t,amount:r,account:s,chainId:c,share:u}=e;const d=(0,o.getAddress)(t);return{data:n.interface.encodeFunctionData("withdraw",[d===i.df[c]?a.d:d,s,s,r,u?u.toString():0])}},u=e=>{let{bentobox:n,tokenAddress:t,rebalance:r}=e;return{data:n.interface.encodeFunctionData("harvest",[t,r,0])}},d=e=>{let{bentobox:n,actions:t=[],revertOnFail:r}=e;const o=t.filter(Boolean);if(0===o.length)throw new Error("No valid actions");return 1===o.length?o[0]:o.length>1?n.interface.encodeFunctionData("batch",[o,r]):void 0};var l=t(59499),p=t(69807),f=t(46440),v=t(44554),m=t(12614),b=t(68411),g=t(67294);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,l.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=e=>{const{account:n,chainId:t,library:r}=(0,m.aQ)(),l=(0,b.h7)(),h=(0,w.rO)(!0),O=(0,g.useCallback)((async(e,o,a)=>{if(t&&n&&h&&r)try{const i=await r.getSigner().sendTransaction({from:n,to:h.address,data:d({bentobox:h,actions:[c({bentobox:h,tokenAddress:e,account:n,amount:o,chainId:t}).data,u({bentobox:h,tokenAddress:e,rebalance:!0}).data,c({bentobox:h,tokenAddress:e,account:n,amount:a.sub(o),chainId:t}).data],revertOnFail:!1})});if(null!==i&&void 0!==i&&i.hash)return l(i,{summary:"Withdraw from Bentobox"})}catch(i){return console.error("Bentobox withdraw error:",i),i}}),[n,l,h,t,r]),A=(0,g.useCallback)((async(c,u,f,v)=>{if(!f||!t||!n||!h||!r)return;const m=[];let b="";try{const g=await h.balanceOf(c.wrapped.address,"0x000000000000000000000000000000000000dead"),y=(i.QA.equal(i.QA.BigInt(0),u.base)&&i.QA.equal(i.QA.BigInt(0),u.elastic)?f:s.O$.from((0,p.T)(u,i.QA.BigInt(f)).toString())).sub(g.isZero()?1e3:0);v&&e&&(m.push((e=>{let{bentobox:n,account:t,masterContract:r,permit:o}=e;const{v:a,r:i,s:s}=o;return{data:n.interface.encodeFunctionData("setMasterContractApproval",[t,r,!0,a,i,s])}})({bentobox:h,masterContract:e,permit:v,account:n}).data),b+="Approve Master Contract and");const{data:O,value:w}=(e=>{let{bentobox:n,tokenAddress:t,share:r,amount:c,account:u,chainId:d}=e;const l=(0,o.getAddress)(t);return l===i.df[d]?{data:n.interface.encodeFunctionData("deposit",[a.d,u,u,0,r]),value:c}:{data:n.interface.encodeFunctionData("deposit",[l,u,u,0,r]),value:s.O$.from(0)}})({bentobox:h,tokenAddress:c.wrapped.address,account:n,amount:f,share:y,chainId:t});m.push(O),b+="Deposit to Bentobox",g.isZero()&&m.push((e=>{let{bentobox:n,tokenAddress:t,fromAddress:r,toAddress:o,share:a}=e;return{data:n.interface.encodeFunctionData("transfer",[t,r,o,a])}})({bentobox:h,fromAddress:n,tokenAddress:c.wrapped.address,toAddress:"0x000000000000000000000000000000000000dead",share:s.O$.from(1)}).data);const A=await r.getSigner().sendTransaction({from:n,to:h.address,data:d({bentobox:h,actions:m,revertOnFail:!0}),value:w});return null!==A&&void 0!==A&&A.hash&&(l(A,{summary:b}),await A.wait()),A}catch(g){return console.error("Bentobox deposit error:",g),g}}),[n,l,h,t,r,e]),P=(0,g.useCallback)((async(e,o,a)=>{if(!o||!t||!n||!h||!r)return;const i=(0,v.uN)(e,f.RB,r),s=await i.balanceOf(null===h||void 0===h?void 0:h.address);if(o.gt(s))return O(e,s,o);try{const i=await r.getSigner().sendTransaction(y({from:n,to:h.address},c({bentobox:h,tokenAddress:e,account:n,amount:o,chainId:t,share:a})));if(null!==i&&void 0!==i&&i.hash)return l(i,{summary:"Withdraw from Bentobox"})}catch(u){return console.error("Bentobox withdraw error:",u),u}}),[n,l,h,t,r,O]),D=(0,g.useCallback)((async function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&h&&r&&n)try{const t=await r.getSigner().sendTransaction(y({from:n,to:h.address},u({bentobox:h,tokenAddress:e,rebalance:o})));if(null!==t&&void 0!==t&&t.hash)return l(t,{summary:o?"Harvest & Rebalance":"Harvest"})}catch(a){return console.error("bentobox harvest error:",a),a}}),[n,l,h,t,r]);return{deposit:A,withdraw:P,harvest:D,withdrawWithHarvest:O}},w=(t(89638),t(37601),t(54907));t(89735),t(1082);var A=t(76294),P=t(80113),D=t(90573)},61647:function(e,n,t){t.d(n,{C:function(){return c}});var r=t(31518),o=t(2886),a=t(67294),i=t(54907);const s=e=>{const n=(0,a.useMemo)((()=>e.map((e=>[null===e||void 0===e?void 0:e.wrapped.address]))),[e]),t=(0,i.rO)(),s=(0,o.es)(t,"totals",n),c=(0,a.useMemo)((()=>s.some((e=>e.loading))),[s]);return(0,a.useMemo)((()=>({rebases:e.reduce(((e,n,t)=>{const o=s[t];return n&&(null!==o&&void 0!==o&&o.result?e[n.wrapped.address]={token:n.wrapped,base:r.QA.BigInt(o.result.base.toString()),elastic:r.QA.BigInt(o.result.elastic.toString())}:e[n.wrapped.address]=void 0),e}),{}),loading:c})),[c,s,e])},c=e=>{const n=(0,a.useMemo)((()=>[e]),[e]),{rebases:t,loading:r}=s(n);return(0,a.useMemo)((()=>e&&!r?{rebase:t[null===e||void 0===e?void 0:e.wrapped.address],loading:r}:{rebase:void 0,loading:r}),[r,t,e])};n.Z=s},92037:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2886),o=t(54907);function a(){var e,n;const t=(0,o.h$)();return null===(e=(0,r.Wk)(t,"getCurrentBlockTimestamp"))||void 0===e||null===(n=e.result)||void 0===n?void 0:n[0]}},44232:function(e,n,t){t.d(n,{j3:function(){return S},pO:function(){return D}});var r,o=t(59499),a=t(16441),i=t(31518),s=t(33624),c=t(2886),u=t(12614),d=t(67294),l=t(54907),p=t(67993),f=t(66367);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e[e.AMOUNT=1]="AMOUNT",e[e.ALLOWED=2]="ALLOWED"}(r||(r={}));const b={1:{[s.gn.address]:{type:r.AMOUNT,name:"USD Coin",version:"2"},[s.h1.address]:{type:r.ALLOWED,name:"Dai Stablecoin",version:"1"},[i.hs[1].address]:{type:r.AMOUNT,name:"SushiSwap"}},4:{"0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735":{type:r.ALLOWED,name:"Dai Stablecoin",version:"1"},[i.hs[4].address]:{type:r.AMOUNT,name:"SushiSwap"}},3:{[i.hs[3].address]:{type:r.AMOUNT,name:"SushiSwap"},"0x07865c6E87B9F70255377e024ace6630C1Eaa37F":{type:r.AMOUNT,name:"USD Coin",version:"2"}},5:{[i.hs[5].address]:{type:r.AMOUNT,name:"SushiSwap"}},42:{[i.hs[42].address]:{type:r.AMOUNT,name:"SushiSwap"}}};let g;!function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.LOADING=1]="LOADING",e[e.NOT_SIGNED=2]="NOT_SIGNED",e[e.SIGNED=3]="SIGNED"}(g||(g={}));const h=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],y=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],O=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],w=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}];function A(e,n,t){var o,s;const{account:v,chainId:A,library:P}=(0,u.aQ)(),D=(0,f.Z)(),S=null!==e&&void 0!==e&&null!==(o=e.currency)&&void 0!==o&&o.isToken?e.currency.address:void 0,N=(0,l.N9)(S),k=(0,p.Z)(),E=(0,d.useMemo)((()=>[null!==v&&void 0!==v?v:void 0]),[v]),j=(0,c.Wk)(N,"nonces",E),x=null!==t&&void 0!==t?t:A&&S?null===(s=b[A])||void 0===s?void 0:s[S]:void 0,{0:T,1:I}=(0,d.useState)(null);return(0,d.useMemo)((()=>{var t,o;if(k||!e||!N||!v||!A||!D||!P||!j.valid||!S||!n||!x)return{state:g.NOT_APPLICABLE,signatureData:null,gatherPermitSignature:null};const s=null===(t=j.result)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.toNumber();if(j.loading||"number"!==typeof s)return{state:g.LOADING,signatureData:null,gatherPermitSignature:null};const c=T&&T.owner===v&&T.deadline>=D.toNumber()&&T.tokenAddress===S&&T.nonce===s&&T.spender===n&&("allowed"in T||i.QA.equal(i.QA.BigInt(T.amount),e.quotient));return{state:c?g.SIGNED:g.NOT_SIGNED,signatureData:c?T:null,gatherPermitSignature:async function(){const t=x.type===r.ALLOWED,o=D.toNumber()+1200,i=e.quotient.toString(),c=t?{holder:v,spender:n,allowed:t,nonce:s,expiry:o}:{owner:v,spender:n,value:i,nonce:s,deadline:o},u=x.version?{name:x.name,version:x.version,verifyingContract:S,chainId:A}:{name:x.name,verifyingContract:S,chainId:A},d=JSON.stringify({types:{EIP712Domain:x.version?h:y,Permit:t?w:O},domain:u,primaryType:"Permit",message:c});return P.send("eth_signTypedData_v4",[v,d]).then(a.splitSignature).then((e=>{I(m(m({v:e.v,r:e.r,s:e.s,deadline:o},t?{allowed:t}:{amount:i}),{},{nonce:s,chainId:A,owner:v,spender:n,tokenAddress:S,permitType:x.type}))}))}}}),[k,e,N,v,A,D,P,j.valid,j.result,j.loading,S,n,x,T])}const P={version:"1",name:"Steamx LP Token",type:r.AMOUNT};function D(e,n){return A(e,n,P)}function S(e,n){const t=(0,l.N9)(null===e||void 0===e?void 0:e.currency.address),o=(0,c.Wk)(t,"name"),a=(0,d.useMemo)((()=>{var e;return null!==o&&void 0!==o&&null!==(e=o.result)&&void 0!==e&&e.length?null===o||void 0===o?void 0:o.result[0]:void 0}),[o]);return A(e?i.ih.fromRawAmount(e.currency,i.Bz):void 0,n,{version:"1",name:null!==a&&void 0!==a?a:"",type:r.AMOUNT})}},76294:function(e,n,t){var r=t(74221),o=t(67294);r.Z.IFuseOptions;n.Z=function(e){let{data:n,options:t}=e;const{0:a,1:i}=(0,o.useState)(""),s=(0,o.useCallback)((()=>i("")),[]);return(0,o.useMemo)((()=>{const e=function(e){let{fuse:n,data:t,term:r}=e;const o=n.search(r);return r?o.map((e=>e.item)):t}({fuse:new r.Z(n||[],t),data:n,term:a});return{result:e,search:i,term:a,reset:s}}),[n,t,s,a])}},67993:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(2886),o=t(12614),a=t(67294),i=t(54907);function s(){var e,n;const{account:t}=(0,o.aQ)(),s=(0,i.c5)(),c=(0,a.useMemo)((()=>[null!==t&&void 0!==t?t:void 0]),[t]),u=(0,r.Wk)(s,"isArgentWallet",c,r.DB);return null!==(e=null===u||void 0===u||null===(n=u.result)||void 0===n?void 0:n[0])&&void 0!==e&&e}},80113:function(e,n,t){var r=t(2593),o=t(31518),a=t(67294);function i(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";try{return n.replace("[",t).replace("]","").split(t).reduce(((e,n)=>e[n]),e)}catch(r){return}}n.Z=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{0:t,1:s}=(0,a.useState)(n),c=(0,a.useMemo)((()=>{if(e&&e.length>0){const n=[...e];return null!==t&&n.sort(((e,n)=>{const a=i(e,t.key),s=i(n,t.key);if("number"===typeof a&&"number"===typeof s){if(a===1/0)return"ascending"===t.direction?-1:1;if(s===1/0)return"ascending"===t.direction?1:-1;if(a<s)return"ascending"===t.direction?-1:1;if(a>s)return"ascending"===t.direction?1:-1}if(a instanceof r.O$&&s instanceof r.O$){if(a.lt(s))return"ascending"===t.direction?-1:1;if(a.gt(s))return"ascending"===t.direction?1:-1}if(a instanceof o.QA&&s instanceof o.QA){if(o.QA.lessThan(a,s))return"ascending"===t.direction?-1:1;if(o.QA.greaterThan(a,s))return"ascending"===t.direction?1:-1}if(a instanceof o.ih&&s instanceof o.ih){if(a.lessThan(s))return"ascending"===t.direction?-1:1;if(a.greaterThan(s))return"ascending"===t.direction?1:-1}return a?s?0:-1:1})),n}return[]}),[e,t]),u=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ascending";t&&t.key===e&&"ascending"===t.direction?n="descending":t&&t.key===e&&"descending"===t.direction&&(n="ascending"),s({key:e,direction:n})};return{items:c,requestSort:u,sortConfig:t}}},66367:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(16339),o=t(67294),a=t(92037);function i(){const e=(0,r.C)((e=>e.user.userDeadline)),n=(0,a.Z)();return(0,o.useMemo)((()=>{if(n&&e)return n.add(e)}),[n,e])}}}]);