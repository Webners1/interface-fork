"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7901],{37901:function(e,o,n){n.r(o),n.d(o,{default:function(){return Q}});var t=n(55929),a=n(14744),r=n(31518),i=n(25962),l=n(71862),s=n(15205),d=n(56785),c=n(63192),u=n(76537),p=n(10697),v=n(33318),m=n(48410),x=n(68326),g=n(12614),h=n(16339),f=n(53134),w=n(627),N=n(67294),T=n(18269),P=n(85893);var U=()=>{var e,o;const{chainId:n}=(0,g.aQ)(),{i18n:t}=(0,a.mV)(),i=(0,h.T)(),[l]=(0,w.DG)(),{maxFeePerGas:s,maxPriorityFeePerGas:c}=(0,x.Z)(),{0:u,1:p}=(0,N.useState)(""),{0:v,1:U}=(0,N.useState)("");return(0,N.useEffect)((()=>{l||i((0,f.RX)({maxFee:void 0,maxPriorityFee:void 0}))}),[i,l]),(0,P.jsxs)("div",{className:"flex gap-4",children:[(0,P.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,P.jsx)(d.Z,{variant:"sm",className:"px-2",children:t._(t._("Max Fee"))}),(0,P.jsxs)("div",{className:"flex items-baseline justify-between px-4 py-1 border rounded bg-dark-900 border-dark-700 hover:border-dark-600",children:[(0,P.jsx)(d.Z,{weight:700,className:"relative flex items-baseline flex-grow gap-3 overflow-hidden",children:(0,P.jsx)(m.Z,{value:u,onUserInput:e=>{i((0,f.iL)(e?(0,T.toWei)(e,"gwei"):void 0)),p(e)},placeholder:"".concat(n&&s?null===(e=r.ih.fromRawAmount(r.B5[n],(0,T.toWei)(s.toString(),"gwei")))||void 0===e?void 0:e.toSignificant(6):"0.00"),className:"font-medium leading-[36px] focus:placeholder:text-low-emphesis flex-grow w-full text-left bg-transparent text-inherit disabled:cursor-not-allowed",autoFocus:!0})}),(0,P.jsx)(d.Z,{variant:"sm",children:"GWEI"})]})]}),(0,P.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,P.jsx)(d.Z,{variant:"sm",className:"px-2",children:t._(t._("Max Priority Fee"))}),(0,P.jsxs)("div",{className:"flex items-baseline justify-between px-4 py-1 border rounded bg-dark-900 border-dark-700 hover:border-dark-600",children:[(0,P.jsx)(d.Z,{weight:700,className:"relative flex items-baseline flex-grow gap-3 overflow-hidden",children:(0,P.jsx)(m.Z,{value:v,onUserInput:e=>{i((0,f.lz)(e?(0,T.toWei)(e,"gwei"):void 0)),U(e)},placeholder:"".concat(n&&c?null===(o=r.ih.fromRawAmount(r.B5[n],(0,T.toWei)(c.toString(),"gwei")))||void 0===o?void 0:o.toSignificant(6):"0.00"),className:"font-medium leading-[36px] focus:placeholder:text-low-emphesis flex-grow w-full text-left bg-transparent text-inherit disabled:cursor-not-allowed",autoFocus:!0})}),(0,P.jsx)(d.Z,{variant:"sm",children:"GWEI"})]})]})]})},b=n(32036),y=n(59497),C=n(92088),j=n(40588),I=n(92659),_=n(62483),E=n(27262),A=n(30526),S=n(67993),O=n(46847),k=n(96033),Z=n(22651),W=n(90573),R=n(60708),M=n(68411),F=n(22986),B=n(54907);let H;!function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.WRAP=1]="WRAP",e[e.UNWRAP=2]="UNWRAP"}(H||(H={}));const D={wrapType:H.NOT_APPLICABLE};var L=n(1420),G=n(46430),V=n(47981);var K=e=>{let{isOpen:o,tokens:n,onConfirm:t}=e;return(0,P.jsx)(G.Z.Controlled,{isOpen:o,onDismiss:t,children:(0,P.jsx)(V.W,{tokens:n})})},X=n(68273),q=n(2962);const z=e=>{var o,n,m,x,h,T,G,V,z,Q;let{banners:J}=e;const{i18n:Y}=(0,a.mV)(),$=(0,X.jj)(),{account:ee,chainId:oe}=(0,g.aQ)(),ne=(0,_.e_)(),[te]=(0,w.DG)(),{independentField:ae,typedValue:re,recipient:ie}=(0,X.dU)(),{v2Trade:le,parsedAmount:se,currencies:de,inputError:ce,allowedSlippage:ue,to:pe}=(0,X.SM)(),[ve,me]=[(0,_.U8)(null===$||void 0===$?void 0:$.inputCurrencyId),(0,_.U8)(null===$||void 0===$?void 0:$.outputCurrencyId)];console.log("output",null===$||void 0===$?void 0:$.outputCurrencyId);const{0:xe,1:ge}=(0,N.useState)(!1),he=(0,N.useMemo)((()=>{var e,o;return null!==(e=null===(o=[ve,me])||void 0===o?void 0:o.filter((e=>{var o;return null!==(o=null===e||void 0===e?void 0:e.isToken)&&void 0!==o&&o})))&&void 0!==e?e:[]}),[ve,me]),fe=(0,N.useCallback)((()=>{ge(!0)}),[]),we=he&&he.filter((e=>!Boolean(e.address in ne))),{wrapType:Ne,execute:Te,inputError:Pe}=function(e,o,n){const{chainId:t,account:a}=(0,g.aQ)(),i=(0,B.lz)(),l=(0,F._h)(null!==a&&void 0!==a?a:void 0,e),s=(0,N.useMemo)((()=>(0,R.e)(n,e)),[e,n]),d=(0,M.h7)();return(0,N.useMemo)((()=>{if(!i||!t||!e||!o||t===r.a_.CELO)return D;const n=r.FX[t];if(!n)return D;const a=Boolean(null===s||void 0===s?void 0:s.greaterThan("0")),c=s&&l&&!l.lessThan(s);return e.isNative&&n.equals(o)?{wrapType:H.WRAP,execute:c&&s?async()=>{try{const e=await i.deposit({value:"0x".concat(s.quotient.toString(16))});d(e,{summary:"Wrap ".concat(s.toSignificant(6)," ").concat(r.B5[t].symbol," to ").concat(r.FX[t].symbol)})}catch(e){console.error("Could not deposit",e)}}:void 0,inputError:c?void 0:a?"Insufficient ".concat(r.B5[t].symbol," balance"):"Enter ".concat(r.B5[t].symbol," amount")}:n.equals(e)&&o.isNative?{wrapType:H.UNWRAP,execute:c&&s?async()=>{try{const e=await i.withdraw("0x".concat(s.quotient.toString(16)));d(e,{summary:"Unwrap ".concat(s.toSignificant(6)," ").concat(r.FX[t].symbol," to ").concat(r.B5[t].symbol)})}catch(e){console.error("Could not withdraw",e)}}:void 0,inputError:c?void 0:a?"Insufficient ".concat(r.FX[t].symbol," balance"):"Enter ".concat(r.FX[t].symbol," amount")}:D}),[i,t,e,o,s,l,d])}(de[f.gN.INPUT],de[f.gN.OUTPUT],re),Ue=Ne!==H.NOT_APPLICABLE,{address:be}=(0,A.Z)(ie),ye=Ue?void 0:le,Ce=(0,N.useMemo)((()=>Ue?{[f.gN.INPUT]:se,[f.gN.OUTPUT]:se}:{[f.gN.INPUT]:ae===f.gN.INPUT?se:null===ye||void 0===ye?void 0:ye.inputAmount,[f.gN.OUTPUT]:ae===f.gN.OUTPUT?se:null===ye||void 0===ye?void 0:ye.outputAmount}),[ae,se,Ue,ye]),je=(0,W.NF)(Ce[f.gN.INPUT]),Ie=(0,W.NF)(Ce[f.gN.OUTPUT]),_e=(0,I.Ld)(je,Ie),{onSwitchTokens:Ee,onCurrencySelection:Ae,onUserInput:Se}=(0,X._r)(),Oe=!ce,ke=ae===f.gN.INPUT?f.gN.OUTPUT:f.gN.INPUT,Ze=(0,N.useCallback)((e=>{Se(f.gN.INPUT,e)}),[Se]),We=(0,N.useCallback)((e=>{Se(f.gN.OUTPUT,e)}),[Se]),{0:{showConfirm:Re,tradeToConfirm:Me,swapErrorMessage:Fe,attemptingTxn:Be,txHash:He},1:De}=(0,N.useState)({showConfirm:!1,tradeToConfirm:void 0,attemptingTxn:!1,swapErrorMessage:void 0,txHash:void 0}),Le={[ae]:re,[ke]:Ue?null!==(o=null===(n=Ce[ae])||void 0===n?void 0:n.toExact())&&void 0!==o?o:"":null!==(m=null===(x=Ce[ke])||void 0===x?void 0:x.toSignificant(6))&&void 0!==m?m:""},Ge=Boolean(de[f.gN.INPUT]&&de[f.gN.OUTPUT]&&(null===(h=Ce[ae])||void 0===h?void 0:h.greaterThan(r.QA.BigInt(0)))),Ve=!(null!==ye&&void 0!==ye&&ye.route),[Ke,Xe]=(0,E.re)(ye,ue),qe=(0,N.useCallback)((async()=>{await Xe()}),[Xe]),{0:ze,1:Qe}=(0,N.useState)(!1);(0,N.useEffect)((()=>{Ke===E.UK.PENDING&&Qe(!0)}),[Ke,ze]);const Je=(0,k.Z)(),{callback:Ye,error:$e}=(0,Z.od)(ye,ue,pe,undefined,null,Je),[eo]=(0,w.RO)(),oo=(0,N.useCallback)((()=>{Ye&&(_e&&!(0,j.ZP)(_e)||(De({attemptingTxn:!0,tradeToConfirm:Me,showConfirm:Re,swapErrorMessage:void 0,txHash:void 0}),Ye().then((e=>{var o,n,t,a;De({attemptingTxn:!1,tradeToConfirm:Me,showConfirm:Re,swapErrorMessage:void 0,txHash:e}),gtag("event",null===ie?"Swap w/o Send":(null!==be&&void 0!==be?be:ie)===ee?"Swap w/o Send + recipient":"Swap w/ Send",{event_category:"Swap",event_label:[null===ye||void 0===ye||null===(o=ye.inputAmount)||void 0===o||null===(n=o.currency)||void 0===n?void 0:n.symbol,null===ye||void 0===ye||null===(t=ye.outputAmount)||void 0===t||null===(a=t.currency)||void 0===a?void 0:a.symbol,eo?"SH":"MH"].join("/")}),gtag("event",eo?"Swap with multihop disabled":"Swap with multihop enabled",{event_category:"Routing"})})).catch((e=>{De({attemptingTxn:!1,tradeToConfirm:Me,showConfirm:Re,swapErrorMessage:e.message,txHash:void 0})}))))}),[Ye,_e,Me,Re,ie,be,ee,null===ye||void 0===ye||null===(T=ye.inputAmount)||void 0===T||null===(G=T.currency)||void 0===G?void 0:G.symbol,null===ye||void 0===ye||null===(V=ye.outputAmount)||void 0===V||null===(z=V.currency)||void 0===z?void 0:z.symbol,eo]),no=(0,N.useMemo)((()=>{const e=null===ye||void 0===ye?void 0:ye.priceImpact;return(0,j.oX)(e&&_e?e.greaterThan(_e)?e:_e:null!==e&&void 0!==e?e:_e)}),[_e,ye]),to=!(0,S.Z)()&&!ce&&(Ke===E.UK.NOT_APPROVED||Ke===E.UK.PENDING||ze&&Ke===E.UK.APPROVED)&&!(no>3&&!te),ao=(0,N.useCallback)((()=>{De({showConfirm:!1,tradeToConfirm:Me,attemptingTxn:Be,swapErrorMessage:Fe,txHash:He}),He&&Se(f.gN.INPUT,"")}),[Be,Se,Fe,Me,He]),ro=(0,N.useCallback)((()=>{De({tradeToConfirm:ye,swapErrorMessage:Fe,txHash:He,attemptingTxn:Be,showConfirm:Re})}),[Be,Re,Fe,ye,He]),io=(0,N.useCallback)((e=>{Qe(!1),Ae(f.gN.INPUT,e)}),[Ae]),lo=(0,N.useCallback)((e=>{Ae(f.gN.OUTPUT,e)}),[Ae]),so=(0,O.G)(null===de||void 0===de?void 0:de.INPUT,null===de||void 0===de?void 0:de.OUTPUT),co=(0,N.useMemo)((()=>{switch(no){case 0:case 1:case 2:default:return"text-low-emphesis";case 3:return"text-yellow";case 4:return"text-red"}}),[no]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(q.PB,{title:"Rails Network\xae Swap"}),(0,P.jsx)(u.Z,{isOpen:Re,trade:ye,originalTrade:Me,onAcceptChanges:ro,attemptingTxn:Be,txHash:He,recipient:ie,allowedSlippage:ue,onConfirm:oo,swapErrorMessage:Fe,onDismiss:ao}),(0,P.jsx)(K,{isOpen:we.length>0&&!xe,tokens:we,onConfirm:fe}),(0,P.jsxs)(L.yz,{children:[(0,P.jsx)("div",{className:"px-2",children:(0,P.jsx)(y.Z,{inputCurrency:de[f.gN.INPUT],outputCurrency:de[f.gN.OUTPUT]})}),(0,P.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,P.jsx)(C.Z,{spendFromWallet:!0,header:C.Z.Header,currency:de[f.gN.INPUT],value:Le[f.gN.INPUT],onChange:Ze,onSelect:io}),(0,P.jsx)("div",{className:"z-0 flex justify-center mt-4 mb-4",children:(0,P.jsx)("div",{role:"button",className:"p-2.5 rounded-[5px] bg-blue-700 border shadow-md border-dark-700 hover:border-dark-600",onClick:()=>{Qe(!1),Ee()},children:(0,P.jsx)(t.Z,{width:14,className:"text-high-emphesis hover:text-white"})})}),(0,P.jsx)(C.Z,{spendFromWallet:!0,header:C.Z.Header,currency:de[f.gN.OUTPUT],value:Le[f.gN.OUTPUT],onChange:We,onSelect:lo,priceImpact:_e,priceImpactCss:co}),Je&&(0,P.jsx)(U,{}),te&&(0,P.jsx)(s.Z,{recipient:ie,action:f.He}),Boolean(ye)&&(0,P.jsx)(v.Z,{inputCurrency:de[f.gN.INPUT],outputCurrency:de[f.gN.OUTPUT],trade:ye,recipient:null!==ie&&void 0!==ie?ie:void 0}),ye&&Ve&&Ge&&(0,P.jsxs)(d.Z,{variant:"xs",className:"py-2 text-center",children:[Y._(Y._("Insufficient liquidity for this trade."))," ",eo&&Y._(Y._("Try enabling multi-hop trades"))]}),ee?Ue?(0,P.jsx)(l.ZP,{fullWidth:!0,color:"blue",disabled:Boolean(Pe),onClick:Te,className:"rounded-2xl md:rounded",children:null!==Pe&&void 0!==Pe?Pe:Ne===H.WRAP?Y._(Y._("Wrap")):Ne===H.UNWRAP?Y._(Y._("Unwrap")):null}):to?(0,P.jsxs)("div",{children:[Ke!==E.UK.APPROVED&&(0,P.jsx)(l.ZP,{fullWidth:!0,loading:Ke===E.UK.PENDING,onClick:qe,disabled:Ke!==E.UK.NOT_APPROVED||ze,className:"rounded-2xl md:rounded",children:Y._(Y._("Approve {0}",{0:null===(Q=de[f.gN.INPUT])||void 0===Q?void 0:Q.symbol}))}),Ke===E.UK.APPROVED&&(0,P.jsx)(l.ZP,{color:Oe&&no>2?"red":"gradient",onClick:()=>{te?oo():De({tradeToConfirm:ye,attemptingTxn:!1,swapErrorMessage:void 0,showConfirm:!0,txHash:void 0})},fullWidth:!0,id:"swap-button",disabled:!Oe||Ke!==E.UK.APPROVED||no>3&&!te,className:"rounded-[5px] md:rounded",children:no>3&&!te?Y._(Y._("Price Impact High")):no>2?Y._(Y._("Swap Anyway")):Y._(Y._("Swap"))})]}):(0,P.jsx)(l.ZP,{color:Oe&&no>2&&!$e?"red":"gradient",fullWidth:!0,onClick:()=>{te?oo():De({tradeToConfirm:ye,attemptingTxn:!1,swapErrorMessage:void 0,showConfirm:!0,txHash:void 0})},id:"swap-button",disabled:!Oe||no>3&&!te||!!$e,className:"rounded-[5px] md:rounded",children:ce||(no>3&&!te?Y._(Y._("Price Impact Too High")):no>2?Y._(Y._("Swap Anyway")):Y._(Y._("Swap")))}):(0,P.jsx)(c.Z,{color:"blue",variant:"filled",fullWidth:!0,className:"rounded-2xl md:rounded"}),te&&Fe?(0,P.jsx)(p.Z,{error:Fe}):null,so?(0,P.jsx)(b.Z,{currencies:[de.INPUT,de.OUTPUT]}):null]})]}),(0,P.jsx)(i.Z,{banners:J})]})};z.Layout=(0,L.Pf)("swap-page");var Q=z},55929:function(e,o,n){var t=n(67294);const a=t.forwardRef((function(e,o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o},e),t.createElement("path",{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}));o.Z=a}}]);